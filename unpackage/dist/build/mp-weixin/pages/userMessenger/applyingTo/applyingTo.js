(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/userMessenger/applyingTo/applyingTo"],{"05f2":function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"0b70":function(e,t,n){"use strict";n.r(t);var a=n("05f2"),o=n("8007");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("58d6");var s,u=n("f0c5"),l=Object(u["a"])(o["default"],a["b"],a["c"],!1,null,"44a32b80",null,!1,a["a"],s);t["default"]=l.exports},"0ebf":function(e,t,n){},4022:function(e,t,n){"use strict";(function(e){n("d774");a(n("66fd"));var t=a(n("0b70"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"58d6":function(e,t,n){"use strict";var a=n("0ebf"),o=n.n(a);o.a},8007:function(e,t,n){"use strict";n.r(t);var a=n("e172"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},e172:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n("597d")),o=s(n("a6bb")),i=s(n("78ac"));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){n.e("components/sub-unit/subunit").then(function(){return resolve(n("e864"))}.bind(null,n)).catch(n.oe)},l={name:"",components:{subunit:u},props:{},data:function(){return{remark:"",image:[],isLoding:!1,locdata:[{label:"姓名",value:"",disabled:!0},{label:"所属平台",value:"",placeholder:"请输入平台",disabled:!1},{label:"工号",value:"",placeholder:"请输入工号",disabled:!1}]}},methods:{goRecord:function(){e.navigateTo({url:"/pages/userMessenger/applyingTo/applyingRecord/applyingRecord"})},pushBtn:function(){var t=this;e.chooseImage({extension:["jpg","jpeg","png","gif"],success:function(n){var a=n.tempFilePaths;t.isLoding=!0;var o=t;if(0!=a.length){var i=[];a.forEach((function(e){i.push(o.upload(e))})),Promise.all(i).then((function(e){o.isLoding=!1})).catch((function(t){o.isLoding=!1,e.showModal({title:"上传文件出错:"+t})}))}}})},upload:function(t){var n=this;return new Promise((function(o,i){e.uploadFile({url:a.default.services.file.upload,filePath:t,name:"file",fail:function(e){i("网络出错")},success:function(t){if(200==t.statusCode){var a=JSON.parse(t.data);200==a.code?(n.image.length<3?n.image.push(a.data.url):e.showToast({title:"数量不超过三张",icon:"none"}),o(a)):i(a.msg)}else i(t.statusCode)}})}))},submit:function(){var t=this;""!=this.locdata[1].value?""!=this.locdata[2].value?1!=this.isLoding&&(e.showLoading({title:"加载中"}),o.default.applyToBecome({data:{platform:this.locdata[1].value,code:this.locdata[2].value,files:this.image,user_remark:this.remark},fail:function(){e.hideLoading(),e.showToast({title:"网络错误",icon:"none"})},success:function(n){e.hideLoading(),200==n.statusCode?200==n.data.code?(e.showToast({title:n.data.msg}),t.locdata[1].value="",t.locdata[2].value="",t.image=[],t.remark=""):e.showToast({title:n.data.msg,icon:"none"}):e.showToast({title:"网络出错了",icon:"none"})}})):e.showToast({title:"请填写平台工号",icon:"none"}):e.showToast({title:"请填写所属平台",icon:"none"})},getuserinfo:function(){var t=this;e.showLoading({title:"加载中"}),i.default.userDeta({data:{},fail:function(t){e.hideLoading(),e.showToast({title:"网络错误",icon:"none"})},success:function(n){if(e.hideLoading(),200==n.statusCode){if(200==n.data.code){var a=n.data.data;t.locdata[0].value=a.username}}else e.showToast({title:"网络出错了",icon:"none"})}})}},mounted:function(){this.getuserinfo()},onLoad:function(){},filters:{},computed:{},watch:{},directives:{}};t.default=l}).call(this,n("543d")["default"])}},[["4022","common/runtime","common/vendor"]]]);