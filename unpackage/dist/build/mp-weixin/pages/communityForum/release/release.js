(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/communityForum/release/release"],{"01df":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"71bb"))}},o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.show=!0},t.e1=function(e){t.show=!1},t.e2=function(e){t.seeShow=!0})},a=[]},1907:function(t,e,n){},2223:function(t,e,n){"use strict";n.r(e);var i=n("01df"),o=n("72a3");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("ea49");var u,s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"6532d946",null,!1,i["a"],u);e["default"]=c.exports},2951:function(t,e,n){"use strict";(function(t){n("d774");i(n("66fd"));var e=i(n("2223"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"72a3":function(t,e,n){"use strict";n.r(e);var i=n("c23c"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},c23c:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("db9d")),o=a(n("597d"));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){n.e("components/sub-botn/subrelease").then(function(){return resolve(n("3916"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/sub-unit/subunit").then(function(){return resolve(n("e864"))}.bind(null,n)).catch(n.oe)},c={name:"",components:{subrelease:u,subunit:s},props:{},data:function(){return{id:"",image:[],show:!1,tagdata:[{name:"推荐",type:!0,default:!0},{name:"热榜",type:!0,default:!0}],choiceData:[],title:"",content:"",isLoding:!1,choiceID:"",seeShow:!1,idx:"",visible:"1",seeTet:{text:"公开 : 所有人可见",img:n("9bf6")},seeList:[{value:"1",label:"公开 : 所有人可见",ref:n("9bf6")},{value:"0",label:"私密 : 仅自己可见",ref:n("5d98")}]}},methods:{addCel:function(t,e){this.idx=e,this.seeTet.img=t.ref,this.seeTet.text=t.label,this.visible=t.value},choice:function(t){t.default||(t.type=!t.type)},ok:function(){var t=this;this.choiceData=this.tagdata.filter((function(t){return 1==t.type})),this.choiceData.map((function(e){e.default||(t.choiceID+=e.id+",")})),this.choiceID=this.choiceID.slice(0,this.choiceID.length-1),this.show=!1},add:function(){var e=this;t.chooseImage({extension:["jpg","jpeg","png","gif"],success:function(n){var i=n.tempFilePaths;e.isLoding=!0;var o=e;if(0!=i.length){var a=[];i.forEach((function(t){a.push(o.upload(t))})),Promise.all(a).then((function(t){o.isLoding=!1})).catch((function(e){o.isLoding=!1,t.showModal({title:"上传文件出错:"+e})}))}}})},upload:function(e){var n=this;return new Promise((function(i,a){t.uploadFile({url:o.default.services.file.upload,filePath:e,name:"file",fail:function(t){a("网络出错")},success:function(t){if(200==t.statusCode){var e=JSON.parse(t.data);200==e.code?(n.image.push(e.data.url),i(e)):a(e.msg)}else a(t.statusCode)}})}))},Submit:function(){var e=this;1!=this.isLoding&&(t.showLoading({title:"提交中..."}),i.default.releasePost({data:{village_id:this.id,title:this.title,content:this.content,albums:this.image,tribune_cat:this.choiceID,visible:this.visible},fail:function(e){t.hideLoading(),t.showToast({title:"网络错误",icon:"none"})},success:function(n){t.hideLoading(),200==n.statusCode?200==n.data.code?(t.showToast({title:n.data.msg,duration:2e3}),e.image=[],e.title="",e.content="",e.choiceData=[]):t.showToast({title:n.data.msg,icon:"none"}):t.showToast({title:"网络请求出错",icon:"none"})}}))},grtColumn:function(){var e=this;i.default.DefaultColumnList({data:{},fail:function(){t.showToast({title:"网络错误",icon:"none"})},success:function(t){200==t.statusCode&&200==t.data.code&&(t.data.data.map((function(t){t.type=!1})),e.tagdata=e.tagdata.concat(t.data.data))}})}},onShow:function(){},mounted:function(){this.grtColumn()},onLoad:function(t){this.id=t.id},filters:{},computed:{},watch:{},directives:{}};e.default=c}).call(this,n("543d")["default"])},ea49:function(t,e,n){"use strict";var i=n("1907"),o=n.n(i);o.a}},[["2951","common/runtime","common/vendor"]]]);